<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Chat Story Maker</title>
    
    <link rel="stylesheet" href="style.css">
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>

    <div class="app-container" id="app-container">
        <div class="top-bar">
            <div class="mode-switcher" id="mode-switcher">
                <button class="mode-btn active" data-mode="personal">üë§ –õ–∏—á–Ω—ã–π</button>
                <button class="mode-btn" data-mode="group">üë• –ì—Ä—É–ø–ø–∞</button>
            </div>
            <div class="controls">
                <button id="set-time-btn">‚è∞</button>
                <button id="change-bg-btn">üé®</button>
            </div>
        </div>
        
        <div class="color-palette" id="color-palette"></div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç —à–∞–ø–∫—É –∏ —á–∞—Ç -->
        <div id="export-wrapper">
            <div class="chat-header" id="chat-header">
                <div class="header-avatar" id="header-avatar">–°</div>
                <div class="header-info" id="header-info">
                    <div class="header-name" id="header-name">–°–µ—Ä–µ–∂–µ–Ω—å–∫–∞</div>
                    <div class="header-status" id="header-status">last seen recently</div>
                </div>
                <div class="header-actions">
                    <div class="header-icon">üìû</div>
                    <div class="header-icon">‚ãÆ</div>
                </div>
            </div>
            <div class="chat-screen" id="chat-screen"></div>
        </div>
        
        <div class="message-composer">
            <button class="sender-selector-btn" id="sender-selector-btn"></button>
            <textarea id="message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ" rows="1"></textarea>
            <button id="send-btn">
                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M3.32 10.95c.48 0 .88.4.88.88v.35c0 .48-.4.88-.88.88-.48 0-.88-.4-.88-.88v-.35c0-.48.4-.88.88-.88zM20.25 12c0-.48-.4-.88-.88-.88h-.35c-.48 0-.88.4-.88.88s.4.88.88.88h.35c.48 0 .88-.4.88-.88zM5.5 12.01c0 .48.4.88.88.88h.35c.48 0 .88-.4.88-.88s-.4-.88-.88-.88h-.35a.88.88 0 00-.88.88zm12 .02c0 .48.4.88.88.88h.35c.48 0 .88-.4.88-.88s-.4-.88-.88-.88h-.35a.88.88 0 00-.88.88zm-5.1-5.01c.48 0 .88.4.88.88v.35c0 .48-.4.88-.88.88s-.88-.4-.88-.88v-.35c0-.48.4-.88.88-.88zm-4.32.02c.48 0 .88.4.88.88v.35c0 .48-.4.88-.88.88s-.88-.4-.88-.88v-.35c0-.48.4-.88.88-.88zm8.65.02c.48 0 .88.4.88.88v.35c0 .48-.4.88-.88.88s-.88-.4-.88-.88v-.35c0-.48.4-.88.88-.88zm-5.1 8.65c.48 0 .88.4.88.88v.35c0 .48-.4.88-.88.88s-.88-.4-.88-.88v-.35c0-.48.4-.88.88-.88zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1.5 14.5c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4zm1-6c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"></path></svg>
            </button>
        </div>

        <div class="export-controls">
            <button class="reset-chat-btn" id="reset-chat-btn">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å —á–∞—Ç</button>
            <button id="export-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É –±–æ—Ç–æ–º</button>
        </div>
    </div>
    
    <div class="modal-overlay" id="participants-modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è</h2>
                <button class="close-modal-btn" id="close-participants-modal-btn">&times;</button>
            </div>
            <ul class="participants-list" id="participants-list"></ul>
            <div class="modal-footer">
                <button class="add-participant-modal-btn" id="add-participant-modal-btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</button>
            </div>
        </div>
    </div>

    <!-- –≠—Ç–æ—Ç –±–ª–æ–∫ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ, –Ω–æ –ø—É—Å—Ç—å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è -->
    <div class="export-preview-overlay" id="export-preview-overlay">
        <img id="export-preview-img" src="" alt="–ì–æ—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
    </div>

    <script src="script.js"></script>
</body>
</html>
