<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <!-- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π viewport –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Chat Story Maker</title>

    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="style.css">

    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Telegram Web App -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>

    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="app-container" id="app-container">
        
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <div class="top-bar">
            <div class="mode-switcher" id="mode-switcher">
                <button class="mode-btn active" data-mode="personal">üë§ –õ–∏—á–Ω—ã–π</button>
                <button class="mode-btn" data-mode="group">üë• –ì—Ä—É–ø–ø–∞</button>
            </div>
            <div class="controls">
                <button id="set-time-btn" title="–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è">‚è∞</button>
                <button id="change-bg-btn" title="–°–º–µ–Ω–∏—Ç—å —Ñ–æ–Ω">üé®</button>
            </div>
        </div>
        
        <!-- –ü–∞–ª–∏—Ç—Ä–∞ –¥–ª—è —Ñ–æ–Ω–∞ -->
        <div class="color-palette" id="color-palette"></div>
        
        <!-- –®–∞–ø–∫–∞ —á–∞—Ç–∞ -->
        <div class="chat-header" id="chat-header">
            <div class="avatar" id="header-avatar"></div>
            <div class="chat-info">
                <div class="chat-name" id="header-name">–°–æ–±–µ—Å–µ–¥–Ω–∏–∫</div>
                <div class="chat-status" id="header-status">–≤ —Å–µ—Ç–∏</div>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div class="chat-screen" id="chat-screen"></div>
        
        <!-- –í–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è -->
        <div class="message-composer">
            <button class="sender-selector-btn" id="sender-selector-btn"></button>
            <textarea id="message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ" rows="1"></textarea>
            <button id="send-btn" type="button" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
            </button>
        </div>

        <!-- –≠–∫—Å–ø–æ—Ä—Ç –∏ —Å–±—Ä–æ—Å -->
        <div class="export-controls">
            <button class="reset-chat-btn" id="reset-chat-btn" type="button">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å —á–∞—Ç</button>
            <button id="export-btn" type="button">–°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É</button>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
    <div class="modal-overlay" id="participants-modal-overlay" role="dialog" aria-modal="true" aria-labelledby="participants-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="participants-title">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è</h2>
                <button class="close-modal-btn" type="button" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            </div>
            <ul class="participants-list" id="participants-list"></ul>
            <div class="modal-footer">
                <button class="add-participant-modal-btn" id="add-participant-modal-btn" type="button">‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</button>
            </div>
        </div>
    </div>

    <!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div class="modal-overlay" id="custom-modal-overlay" role="dialog" aria-modal="true" aria-labelledby="custom-modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="custom-modal-title"></h2>
            </div>
            <div class="modal-body" id="custom-modal-body"></div>
            <div class="modal-footer" id="custom-modal-footer"></div>
        </div>
    </div>

    <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
    <div class="export-preview-overlay" id="export-preview-overlay">
        <img id="export-preview-img" src="" alt="–ì–æ—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç -->
    <script src="script.js"></script>
</body>
</html>
